{
  "analysis" : {
    "char_filter" : {
      "doi_prefix_filter" : {
        "type" : "pattern_replace",
        "pattern" : "^(/|doi:|https://doi.org/)?(10\.\d{4,}/[^\s]+)",
        "replacement" : "doi:$2"
      },
      "orcid_prefix_filter" : {
        "type" : "pattern_replace",
        "pattern" : "^(orcid:|https://orcid.org/)?([0-9]{4}-[0-9]{4}-[0-9]{4}-[0-9]{3}[0-9X])",
        "replacement" : "https://orcid.org/$2"
      },
      "mailto_prefix_filter" : {
        "type" : "pattern_replace",
        "pattern" : "^mailto:",
        "replacement" : ""
      },
      "ampersand" : {
        "type" : "mapping",
        "mappings" : [ "& => and " ]
      }
    },
    "normalizer" : {
      "default": {
        "type": "custom",
        "char_filter": [
          "ampersand",
          "doi_prefix_filter",
          "orcid_prefix_filter",
          "mailto_prefix_filter"
        ],
        "filter": [
          "lowercase",
          "asciifolding"
        ]
      },
      "identifier": {
        "type": "custom",
        "char_filter": [
          "doi_prefix_filter",
          "orcid_prefix_filter",
          "mailto_prefix_filter"
        ],
        "filter": [
          "lowercase"
        ]
      }
    },
    "analyzer": {
      "default": {
        "type": "custom",
        "tokenizer": "uax_url_email",
        "char_filter": [
          "ampersand",
          "doi_prefix_filter",
          "mailto_prefix_filter"
        ],
        "filter": [
          "lowercase",
          "stop",
          "asciifolding"
        ]
      },
      "prefix_analyzer": {
        "tokenizer": "autocomplete",
        "filter": [
          "lowercase"
        ]
      },
      "autocomplete": {
        "tokenizer": "autocomplete",
        "filter": [
          "lowercase"
        ]
      },
      "autocomplete_search" : {
        "tokenizer": "lowercase"
      },
      "lowercase_keyword": {
        "tokenizer": "keyword",
        "filter": [
          "lowercase",
          "unique"
        ]
      }
    },
    "tokenizer": {
      "autocomplete": {
        "type": "edge_ngram",
        "min_gram": 1,
        "max_gram": 20,
        "token_chars": [
          "letter","digit"
        ]
      }
    }
  }
}
